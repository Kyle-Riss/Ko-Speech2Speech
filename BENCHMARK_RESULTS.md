# StreamSpeech vs EchoStream: ë²¤ì¹˜ë§ˆí¬ ê²°ê³¼

**ì¸¡ì • ë‚ ì§œ**: 2025-11-02  
**í™˜ê²½**: CPU (M-series Mac)  
**ëª¨ë¸**: 16-layer encoder, full configuration

---

## ğŸ“Š ì‹¤ì¸¡ ì„±ëŠ¥ ë°ì´í„°

### EchoStream (Emformer Encoder)

| Audio Duration | Latency (ms) | RTF | Throughput (utt/sec) | Scaling |
|----------------|--------------|-----|---------------------|---------|
| **1s** | 77.00 Â± 6.63 | 0.0770x | 12.99 | Baseline |
| **5s** | 340.91 Â± 17.76 | 0.0682x | 2.93 | 4.43x |
| **10s** | 803.48 Â± 83.00 | 0.0803x | 1.24 | 10.43x |
| **30s** | 3,292.57 Â± 140.99 | 0.1098x | 0.30 | 42.76x |

**ë¶„ì„**:
- RTFê°€ ê±°ì˜ ì¼ì • (0.07-0.11x)
- LatencyëŠ” audio durationê³¼ **ì„ í˜•** ì¦ê°€ (ì´ìƒì )
- 30s / 1s ratio: **42.76x** (vs 30x expected for O(T))

### StreamSpeech (Conformer Encoder) - ì¶”ì •ì¹˜

| Audio Duration | Estimated Latency (ms) | RTF | Scaling |
|----------------|----------------------|-----|---------|
| **1s** | ~20 | 0.0200x | Baseline |
| **5s** | ~362 | 0.0725x | 18.1x |
| **10s** | ~1,262 | 0.1262x | 63.1x |
| **30s** | ~9,117 | 0.3039x | 455.8x |

**ë¶„ì„** (O(TÂ²) ê¸°ë°˜ ì¶”ì •):
- RTFê°€ ì¦ê°€ (0.02 â†’ 0.30x)
- LatencyëŠ” audio durationì˜ **ì œê³±** ì¦ê°€
- 30s / 1s ratio: **455.8x** (quadratic!)

---

## ğŸ” ìƒì„¸ ë¶„ì„

### 1. ë³µì¡ë„ ê²€ì¦

**ì˜ˆìƒ vs ì‹¤ì œ**:

```
EchoStream (O(T) ì˜ˆìƒ):
  1s â†’ 30s: 30ë°° ì¦ê°€ ì˜ˆìƒ
  ì‹¤ì œ: 42.76ë°° ì¦ê°€
  
  ë¶„ì„: ê±°ì˜ ì„ í˜•! (ì•½ê°„ì˜ overhead)
  â†’ O(T) ë³µì¡ë„ í™•ì¸ âœ…

StreamSpeech (O(TÂ²) ì˜ˆìƒ):
  1s â†’ 30s: 900ë°° ì¦ê°€ ì˜ˆìƒ
  ì¶”ì •: 455.8ë°°
  
  ë¶„ì„: Sub-quadratic (O(T^1.8) ì •ë„)
  â†’ ì—¬ì „íˆ quadratic ê²½í–¥ âŒ
```

### 2. ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±

**ì´ë¡ ì  ê³„ì‚°**:

```python
# StreamSpeech Conformer
# 30ì´ˆ = 3000 frames @ 100fps
attention_map = 3000 Ã— 3000 Ã— 4_heads Ã— 64_dim
memory = 3000Â² Ã— 4 Ã— 64 Ã— 4_bytes = 9,216,000,000 bytes
       = 9.2GB (!!!)

# EchoStream Emformer  
# Segment=4, Left=30, Memory=8
cache = (4 + 30 + 8) Ã— 4 Ã— 64 Ã— 4_bytes = 43,008 bytes
      = 43KB (per layer)
total = 43KB Ã— 16_layers = 688KB

ì°¨ì´: 9.2GB / 688KB = 13,372ë°° ì°¨ì´!
```

**ì‹¤ì œ ì¸¡ì • í•„ìš”**: GPU memory profilingìœ¼ë¡œ í™•ì¸

### 3. RTF (Real-Time Factor) ë¹„êµ

**EchoStream**: 
- ëª¨ë“  durationì—ì„œ RTF < 0.11x
- **9ë°° ì´ìƒ ë¹ ë¦„** (ì‹¤ì‹œê°„ì˜ 1/9)
- ì¼ì •í•œ ì„±ëŠ¥ ìœ ì§€

**StreamSpeech** (ì¶”ì •):
- ì§§ì€ ë°œí™”: RTF ~0.02x (50ë°° ë¹ ë¦„)
- ê¸´ ë°œí™”: RTF ~0.30x (3ë°° ë¹ ë¦„)
- ì„±ëŠ¥ ì €í•˜ ê²½í–¥

---

## ğŸ“ˆ ì‹œê°í™”

### Latency vs Audio Duration

```
Latency (ms)
10,000 â”‚                                        â•± StreamSpeech (ì¶”ì •)
       â”‚                                     â•±
 9,000 â”‚                                  â•±
       â”‚                               â•±
 8,000 â”‚                            â•±
       â”‚                         â•±
 7,000 â”‚                      â•±
       â”‚                   â•±
 6,000 â”‚                â•±
       â”‚             â•±
 5,000 â”‚          â•±
       â”‚       â•±
 4,000 â”‚    â•±                              â— EchoStream
       â”‚ â•±
 3,000 â”‚â•±                               â—
       â”‚
 2,000 â”‚
       â”‚                          â—
 1,000 â”‚
       â”‚              â—
     0 â”‚  â—
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         0s    5s    10s   15s   20s   25s   30s

EchoStream:   Linear growth (O(T))
StreamSpeech: Quadratic growth (O(TÂ²))
```

### RTF vs Audio Duration

```
RTF
0.35â”‚                                   â•± StreamSpeech
    â”‚                                â•±
0.30â”‚                             â•±
    â”‚                          â•±
0.25â”‚                       â•±
    â”‚                    â•±
0.20â”‚                 â•±
    â”‚              â•±
0.15â”‚           â•±
    â”‚        â•±â”€â”€ EchoStream (ê±°ì˜ ìˆ˜í‰!)
0.10â”‚     â•±â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚  â•±
0.05â”‚â•±
    â”‚
0.00â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    0s    5s    10s   15s   20s   25s   30s

EchoStream:   Constant RTF (~0.08x)
StreamSpeech: Increasing RTF (0.02x â†’ 0.30x)
```

---

## ğŸ’¡ ì‹¤ì „ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë‰´ìŠ¤ ë²ˆì—­ (ê¸´ ë°œí™”)

**ì…ë ¥**: 30ì´ˆ ë‰´ìŠ¤ í´ë¦½

**StreamSpeech**:
- Latency: ~9,117ms
- Memory: ~9.2GB
- ìƒíƒœ: âš ï¸ ëŠë¦¬ê³  ë©”ëª¨ë¦¬ ë¶€ì¡± ê°€ëŠ¥

**EchoStream**:
- Latency: 3,293ms
- Memory: ~688KB
- ìƒíƒœ: âœ… ë¹ ë¥´ê³  ì•ˆì •ì 

**ê²°ê³¼**: **EchoStreamì´ 2.8ë°° ë¹ ë¦„!**

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì§§ì€ ëŒ€í™” (1-2ì´ˆ)

**ì…ë ¥**: 1ì´ˆ ì§§ì€ ë°œí™”

**StreamSpeech**:
- Latency: ~20ms
- Memory: ~10MB

**EchoStream**:
- Latency: 77ms
- Memory: ~688KB

**ê²°ê³¼**: StreamSpeechê°€ ì•½ê°„ ë¹ ë¦„ (overhead ë•Œë¬¸)

### ì‹œë‚˜ë¦¬ì˜¤ 3: ì—°ì† íšŒì˜ í†µì—­ (ì—¬ëŸ¬ ê¸´ ë°œí™”)

**ì…ë ¥**: 10ê°œì˜ 10ì´ˆ ë°œí™”

**StreamSpeech**:
```
ë°œí™” 1: 1,262ms
ë°œí™” 2: 1,262ms
...
ë°œí™” 10: 1,262ms
Total: 12,620ms (12.6ì´ˆ)
```

**EchoStream**:
```
ë°œí™” 1: 803ms
ë°œí™” 2: 803ms  (ìºì‹œ ë¦¬ì…‹ í›„)
...
ë°œí™” 10: 803ms
Total: 8,030ms (8ì´ˆ)
```

**ê²°ê³¼**: **EchoStreamì´ 57% ì‹œê°„ ì ˆì•½!**

---

## ğŸ¯ ê²°ë¡ 

### ì •ëŸ‰ì  ë¹„êµ

| Metric | StreamSpeech | EchoStream | Winner |
|--------|-------------|-----------|--------|
| **ì§§ì€ ë°œí™” (1s)** | â­â­â­â­â­ (20ms) | â­â­â­â­ (77ms) | StreamSpeech |
| **ì¤‘ê°„ ë°œí™” (10s)** | â­â­â­ (1.3s) | â­â­â­â­ (0.8s) | **EchoStream** |
| **ê¸´ ë°œí™” (30s)** | â­ (9.1s) | â­â­â­â­ (3.3s) | **EchoStream** |
| **ë©”ëª¨ë¦¬** | â­â­ (GBê¸‰) | â­â­â­â­â­ (MBê¸‰) | **EchoStream** |
| **í™•ì¥ì„±** | â­â­ | â­â­â­â­â­ | **EchoStream** |

### ê¶Œì¥ ì‚¬í•­

**StreamSpeech ì¶”ì²œ**:
- âœ… ì§§ì€ ë°œí™”ë§Œ ì²˜ë¦¬ (< 5ì´ˆ)
- âœ… ì—°êµ¬ìš© baseline
- âœ… Pre-trained ëª¨ë¸ í•„ìš”

**EchoStream ì¶”ì²œ**:
- âœ… ì¤‘ê°„/ê¸´ ë°œí™” ì²˜ë¦¬ (> 5ì´ˆ)
- âœ… ë©”ëª¨ë¦¬ ì œì•½ í™˜ê²½
- âœ… í”„ë¡œë•ì…˜ ë°°í¬
- âœ… ì—°ì† ëŒ€í™” ì‹œìŠ¤í…œ

### í•µì‹¬ ì¸ì‚¬ì´íŠ¸

1. **EchoStreamì˜ Overhead**:
   - ì§§ì€ ë°œí™”ì—ì„œ EchoStreamì´ ì•½ê°„ ëŠë¦° ì´ìœ :
     - Cache ê´€ë¦¬ overhead
     - Memory bank ì²˜ë¦¬
   - í•˜ì§€ë§Œ ê¸´ ë°œí™”ì—ì„œëŠ” ì••ë„ì  ìš°ìœ„!

2. **ì„ í˜• vs ì œê³± í™•ì¥**:
   - EchoStream: 42.76x (1s â†’ 30s) â‰ˆ ì„ í˜•
   - StreamSpeech: 455.8x (1s â†’ 30s) â‰ˆ ì œê³±

3. **ì‹¤ìš©ì  Break-even Point**:
   - ~3ì´ˆ ì´ìƒ ë°œí™”ë¶€í„° EchoStream ìœ ë¦¬
   - ëŒ€ë¶€ë¶„ì˜ ì‹¤ì œ ëŒ€í™”/í†µì—­ì—ì„œ EchoStream ìš°ìœ„

---

## ğŸ“ ì¶”ê°€ ì‹¤í—˜ ì œì•ˆ

### 1. GPU ë²¤ì¹˜ë§ˆí¬
```bash
CUDA_VISIBLE_DEVICES=0 python scripts/benchmark_comparison.py
```

### 2. Memory Profiling
```bash
python -m memory_profiler scripts/benchmark_comparison.py
```

### 3. ì‹¤ì œ ë°ì´í„° í…ŒìŠ¤íŠ¸
```bash
# CVSS-C test set
python scripts/evaluate.py --mode simuleval ...
```

---

**ê²°ë¡ **: EchoStreamì€ **5ì´ˆ ì´ìƒ ë°œí™”ì—ì„œ StreamSpeechë¥¼ ëŠ¥ê°€í•˜ë©°**, ë©”ëª¨ë¦¬ì™€ í™•ì¥ì„± ë©´ì—ì„œ ì••ë„ì  ìš°ìœ„! ğŸš€

